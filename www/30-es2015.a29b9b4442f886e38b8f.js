(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"R/V9":function(t,n,a){"use strict";a.r(n);var e=a("8Y7J"),l=a("mrSG"),i=a("syeQ"),s=a("wd/R");class r{constructor(t,n,a){this.route=t,this.grantService=n,this.toastr=a,this.grantId="",this.statusEnum={PENDING:"pending",COMPLETED:"completed",TOBERECEIVED:"tobereceived"},this.toastTitle="Grant Funding",this.multipleMilestones=!1,this.processing=!1,this.submitted=!1,this.allowFunding=!0,this.grantFund={_id:"",grant:"",donor:"",amount:null},this.grantId=this.route.snapshot.params.id||"",console.log("this.grantId",this.grantId),(()=>{l.__awaiter(this,void 0,void 0,(function*(){let t=yield this.grantService.getById(this.grantId).toPromise();if(this.grant=t.data,console.log("this.grant",this.grant),"multipleMilestones"==this.grant.type){this.multipleMilestones=!0;let t=!0;this.grant.multipleMilestones=this.grant.multipleMilestones.map(n=>{let a,e=(new Date).toISOString(),l=s(n.completionDate).isAfter(s(e));return l&&(t?(a=this.statusEnum.TOBERECEIVED,t=!1):a=this.statusEnum.PENDING),l||(a=this.statusEnum.COMPLETED),n.completionDate=s(n.completionDate).format("DD/MM/YYYY"),Object.assign({},n,{status:a})})}else{this.grant.singleDeliveryDate.completionDate=s(this.grant.singleDeliveryDate.completionDate).format("DD/MM/YYYY"),this.grant.singleDeliveryDate.fundingExpiryDate=s(this.grant.singleDeliveryDate.fundingExpiryDate).format("DD/MM/YYYY");let t=(new Date).toISOString(),n=s(this.grant.singleDeliveryDate.completionDate).isAfter(s(t));this.grant.singleDeliveryDate.status=n?this.statusEnum.COMPLETED:this.statusEnum.TOBERECEIVED}console.log("this.grant.grantManager",this.grant.grantManager),"cancel"==this.grant.status&&(this.allowFunding=!1)}))})()}ngOnInit(){}}var o=a("YBy7");class u{constructor(){console.log("GrantDetailsModule")}}var E=a("hCpU"),g=a("pMnS"),b=a("D3Dn"),h=a("jfhi"),c=a("ENsk"),D=a("GePm"),p=a("p9yP"),d=a("02rE"),m=a("/QED"),M=a("ZZ/e"),f=a("iInd"),v=a("qfBg"),I=a("s7LF"),y=a("oBZk"),w=a("EApP"),Y=e.sb({encapsulation:0,styles:[[""]],data:{}});function G(t){return e.Qb(0,[(t()(),e.ub(0,0,null,null,1,"app-header",[],null,null,null,d.b,d.a)),e.tb(1,114688,null,0,m.a,[M.Lb,M.Gb,f.a,i.a,M.e,v.a,I.e],null,null),(t()(),e.ub(2,0,null,null,1,"ion-content",[["color","light"]],null,null,null,y.I,y.h)),e.tb(3,49152,null,0,M.u,[e.h,e.k,e.z],{color:[0,"color"]},null)],(function(t,n){t(n,1,0),t(n,3,0,"light")}),null)}function O(t){return e.Qb(0,[(t()(),e.ub(0,0,null,null,1,"app-grant-details",[],null,null,null,G,Y)),e.tb(1,114688,null,0,r,[f.a,i.a,w.j],null,null)],(function(t,n){t(n,1,0)}),null)}var S=e.qb("app-grant-details",r,O,{},{},[]),B=a("SVse"),P=a("ej43"),j=a("IheW"),k=a("/zMi"),x=a("lGQG"),C=a("xb1B"),L=a("mJ8l"),T=a("iIA+"),F=a("BS6g"),N=a("3dvx"),q=a("KDGX"),A=a("yriW"),Q=a("tqz6");a.d(n,"GrantDetailsModuleNgFactory",(function(){return R}));var R=e.rb(u,[],(function(t){return e.Db([e.Eb(512,e.j,e.cb,[[8,[E.a,g.a,b.a,h.a,c.a,D.a,p.a,S]],[3,e.j],e.x]),e.Eb(4608,B.m,B.l,[e.u,[2,B.A]]),e.Eb(4608,I.x,I.x,[]),e.Eb(4608,M.a,M.a,[e.z,e.g]),e.Eb(4608,M.Gb,M.Gb,[M.a,e.j,e.r]),e.Eb(4608,M.Lb,M.Lb,[M.a,e.j,e.r]),e.Eb(4608,I.e,I.e,[]),e.Eb(4608,P.a,P.a,[j.c,k.a,x.a]),e.Eb(4608,i.a,i.a,[j.c]),e.Eb(4608,C.a,C.a,[j.c]),e.Eb(1073742336,B.c,B.c,[]),e.Eb(1073742336,I.w,I.w,[]),e.Eb(1073742336,I.k,I.k,[]),e.Eb(1073742336,M.Eb,M.Eb,[]),e.Eb(1073742336,I.t,I.t,[]),e.Eb(1073742336,L.a,L.a,[]),e.Eb(1073742336,T.a,T.a,[]),e.Eb(1073742336,F.a,F.a,[]),e.Eb(1073742336,N.a,N.a,[]),e.Eb(1073742336,q.a,q.a,[]),e.Eb(1073742336,A.a,A.a,[]),e.Eb(1073742336,f.q,f.q,[[2,f.v],[2,f.m]]),e.Eb(1073742336,Q.a,Q.a,[]),e.Eb(1073742336,u,u,[]),e.Eb(1024,f.k,(function(){return[[{path:"",component:o.a}],[{path:"",component:o.a},{path:":id",component:r}]]}),[])])}))}}]);