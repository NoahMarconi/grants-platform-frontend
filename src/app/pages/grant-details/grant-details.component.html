<app-header></app-header>

<ion-content color="light">
    <ion-row class="page-row">
        <ion-col size="12">
            <ion-item mode="md" lines="none" class="heading">
                <ion-label>Grant Details</ion-label>
            </ion-item>

            <hr class="dassed-line">
            <ion-card class="grant" mode="md">
                <ion-card-content>
                    <ion-row>
                        <ion-col size="6">
                            <ion-row>
                                <div class="form-details">
                                    <ion-item>
                                        <ion-label class="grants-details">
                                            <h1>{{ grant?.grantName }}</h1>
                                            <h2>Type :
                                                {{grant?.type == "singleDeliveryDate" ? 'Single Delivery' : 'Multiple Delivery' }}
                                            </h2>
                                            <h2>Grant Manager : {{grant?.grantManager.userName}}</h2>
                                            <h2>Your Remaining Allocation : {{remainingAlloc}}</h2>
                                            <ion-button color="primary" (click)="cancleGrantPopup()">Cancle Grant
                                            </ion-button>
                                        </ion-label>
                                    </ion-item>
                                </div>
                            </ion-row>
                        </ion-col>
                        <ion-col size="6">
                            <ion-row>
                                <div class="form-details">
                                    <ion-item>
                                        <ion-label class="grants-details">
                                            <h1>US$ {{ balance }}</h1>
                                            <h3>pledged of US$ {{grant?.targetFunding}} goal</h3>
                                        </ion-label>
                                    </ion-item>
                                </div>
                            </ion-row>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <div *ngIf="canFund" class="footer-details">
                            <ion-row>
                                <!-- <form #form="ngForm" (ngSubmit)="f.form.valid && onSubmit()"> -->
                                <ion-col size="8">
                                    <ion-item lines="none">
                                        <ion-input placeholder="Amount" type="text" [(ngModel)]="grantFund.amount"
                                            name="amount" [OnlyNumber]="true" #amount="ngModel" required>
                                        </ion-input>
                                    </ion-item>
                                    <label *ngIf="submitted && amount.invalid" class="error">
                                        Please Enter Amount
                                    </label>
                                </ion-col>
                                <ion-col size="4">
                                    <ion-button mode="md" expand="block" [disabled]="processing"
                                        (click)="fundOnGrantPopup()">
                                        Fund Grant
                                    </ion-button>
                                </ion-col>
                                <!-- </form> -->
                            </ion-row>
                        </div>
                        <div *ngIf="canRequestPayout" class="footer-details">
                            <ion-row>
                                <!-- <form #form="ngForm" (ngSubmit)="f.form.valid && onSubmit()"> -->
                                <ion-col size="8">
                                    <ion-item lines="none">
                                        <ion-input placeholder="Amount" type="text" [(ngModel)]="request.requestAmount"
                                            name="requestAmount" [OnlyNumber]="true" #requestAmount="ngModel" required>
                                        </ion-input>
                                    </ion-item>
                                    <label *ngIf="submitted && requestAmount.invalid" class="error">
                                        Please Enter Amount
                                    </label>
                                </ion-col>
                                <ion-col size="6">
                                    <ion-button mode="md" expand="block" [disabled]="processing"
                                        (click)="requestForPayout()">
                                        Send Request for Payout
                                    </ion-button>
                                </ion-col>
                                <!-- </form> -->
                            </ion-row>
                        </div>
                        <!-- <span [innerHtml]='grant?.content'></span> -->
                    </ion-row>
                </ion-card-content>
            </ion-card>
        </ion-col>
    </ion-row>
</ion-content>